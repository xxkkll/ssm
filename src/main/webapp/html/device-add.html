<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" href = "https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css"   >
 
    <link rel="stylesheet" href="../css/device-add.css">
   <script src="../js/jquery.min.js"></script>
    <title>添加设备</title>
</head>
<body>
    <div class="nav-out-container">
    <div class="nav-container">
        <!-- 顶部显示栏 -->
        <div class="nav-top">
            <span class="nav-top-show">
                <a>首页</a>
                <span>/</span>
                <a>设备管理</a>
                <span>/</span>
                <a>增添设备</a>
            </span>
        </div>
        <!-- 表单栏 -->
        <div class="nav-body" style="background-image: linear-gradient(#f7e8df,#ffffff , #f7e8df);border-radius: 20px;">
            <fieldset class="nav-body-flag" style="margin-top: 10px;">
                <legend class="nav-body-flag-iocn">
                    添加设备<i class="fa fa-plus-square-o"></i>
                </legend>
            </fieldset>
            <!-- 表单 -->
            <div class="nav-form">
                <form class="form-adddevice">
                    <div class="form-adddevice-itm">
                        
                            <label class="form-adddevice-lable">设备名称</label>
                        <div class="form-adddevice-input">
                            <input type="text" id="equipmentName" placeholder="设备名称不要重名" name="equipmentName">
                        </div>
                    </div>
                    <div class="form-adddevice-itm">
                        <label class="form-adddevice-lable">设备类型</label>
                        <div class="form-adddevice-input">
                            <input type="text" id="equipmentType" placeholder="设备类型 如：温湿度传感器" name="equipmentType">
                        </div>
                    </div>
                    <div class="form-adddevice-itm">
                        <label class="form-adddevice-lable">用户ID</label>
                        <div class="form-adddevice-input">
                            <input type="text" id="userPhone" placeholder="输入手机号进行设备绑定" name="userPhone">
                        </div>
                    </div>
                    <div class="form-adddevice-itm mybtn">
                        <button type="submit" class="form-adddevice-btn0">提交</button>
                        <button type="reset" class="form-adddevice-btn1">重置</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>
</body>
<script>
    $(document).ready(function () {
        $(".form-adddevice-btn0").click(function () {

            $.ajax({

                url:"../equipment/addEquipment",
                type:"post",
                contentType:"application/json;charset=UTF-8",
                // contentType: "application/x-www-form-urlencoded",
                data:JSON.stringify({
                    "equipment_name":$("#equipmentName").val(),
                    "equipment_type":$("#equipmentType").val(),
                    "owner_id":$("#userPhone").val()
                }),
                dataType:"json",
                success:function (data) {
                    console.log(data);
                    if (data.code==1){
                        alert(data.msg)
                        window.location.href="/device.html"
                    }
                    else {

                        alert(data.msg)
                    }

                },
                error:function () {
                    alert("error")
                }
            })

        })
    })

</script>
</html>